/*!
 * vue-form v1.0.0
 * Released under the MIT License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueFields=t()}(this,function(){"use strict";function e(e){"undefined"!=typeof console&&o&&console.warn("[VueForm warn]: "+e)}function t(e){return"string"==typeof e}function n(e){return null!==e&&"object"==typeof e}function i(e){return void 0===e}function r(e,t){var i,r;if("number"==typeof e.length)for(i=0;i<e.length;i++)t.call(e[i],e[i],i);else if(n(e))for(r in e)e.hasOwnProperty(r)&&t.call(e[r],e[r],r);return e}function a(e,t,n){return e&&new RegExp(t,n).test(e)}function s(a){return{extends:f,methods:{getField:function(e){return this.values instanceof a&&"getField"in this.values?this.values.getField(e):function(e,t,n){var r,a=t.split(".");for(r=0;r<a.length;r++){if(i(e[a[r]]))return n;e=e[a[r]]}return e}(this.values,e.name)},setField:function(e,t,i){this.values instanceof a&&"setField"in this.values?this.values.setField(e,t,i):function(e,t,i){for(var r,a=t.split(".");a.length>1;)n(e[r=a.shift()])&&!c(e[r])||u(e,r,{}),e=e[r];u(e,a.shift(),i)}(this.values,e.name,t),this.$emit("update",e,t,i)},filterFields:function(n){var i=this,a=c(n),s=[];return r(n,function(n,r){t(n.name)||a||(n=d({name:r},n)),t(n.type)||(n=d({type:"text"},n)),t(n.name)?n.show&&!i.evaluate(n.show)||s.push(n):e("Field name missing "+JSON.stringify(n))}),s}}}}function l(e){l.installed||(!function(e){u=e.set,o=e.config.debug||!e.config.silent}(e),e.component("fields",s(e)))}var u,o=!1,c=Array.isArray,d=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var i=t[n];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},v={props:["field"],data:function(){return d({name:"",type:"text",label:"",options:[],default:void 0},this.field)},computed:{attrs:{get:function(){return this.enable&&!this.$parent.evaluate(this.enable)?d({disabled:"true"},this.$data):this.$data},cache:!1},value:{get:function(){var e=this.$parent.getField(this);return i(e)&&!i(this.default)&&(e=this.default)&&this.$parent.setField(this,e),e},set:function(e){i(this.value)&&!e||this.$parent.setField(this,e,this.value)},cache:!1}},methods:{filterOptions:function(t){var i=this,a=[];return t?(r(t,function(e,t){n(e)?a.push({label:t,options:i.filterOptions(e)}):a.push({text:t,value:e})}),a):(e("Invalid options provided for "+this.name),a)}},filters:{options:function(e){return this.filterOptions(e)}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.fields,function(t){return n("div",{key:t.name,staticClass:"form-group"},["checkbox"!=t.type?n("label",[e._v(e._s(t.label))]):e._e(),e._v(" "),n("field-"+t.type,{tag:"component",staticClass:"form-control",attrs:{field:t}})],1)}))},staticRenderFns:[],components:{FieldText:{render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}},"input",e.attrs,!1))},staticRenderFns:[],extends:v},FieldTextarea:{render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}},"textarea",e.attrs,!1))},staticRenderFns:[],extends:v},FieldRadio:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.options|e.options,function(t){return[n("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"radio",name:e.name},domProps:{value:t.value,checked:e._q(e.value,t.value)},on:{change:function(n){e.value=t.value}}},"input",e.attrs,!1)),e._v(" "),n("label",[e._v(e._s(t.text))])]})],2)},staticRenderFns:[],extends:v},FieldCheckbox:{render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{change:function(t){var n=e.value,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.value=n.concat([null])):a>-1&&(e.value=n.slice(0,a).concat(n.slice(a+1)))}else e.value=r}}},"input",e.attrs,!1))},staticRenderFns:[],extends:v},FieldSelect:{render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.value=t.target.multiple?n:n[0]}}},"select",e.attrs,!1),[e._l(e.options|e.options,function(t){return[t.label?n("optgroup",{attrs:{label:t.label}},e._l(t.options,function(t){return n("option",{domProps:{value:t.value}},[e._v(e._s(t.text))])})):n("option",{domProps:{value:t.value}},[e._v(e._s(t.text))])]})],2)},staticRenderFns:[],extends:v},FieldRange:{render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"range"},domProps:{value:e.value},on:{__r:function(t){e.value=t.target.value}}},"input",e.attrs,!1))},staticRenderFns:[],extends:v},FieldNumber:{render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"number"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}},"input",e.attrs,!1))},staticRenderFns:[],extends:v}},props:{config:{type:[Array,Object],default:function(){return[]}},values:{type:Object}},computed:{fields:function(){return this.filterFields(this.config)}},methods:{evaluate:function(e,n){return n=n||this.values,t(e)?function(e,t){try{return Function("with(this){return "+e+"}").call(t)}catch(e){return!1}}(e,d({$match:a},n)):e.call(this,n,this)}}};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(l),l});